# Основные сценарии

* **UC-1**: **Регистрация клиента**:
     - клиенты регистрируют учётную запись, привязывают кредитную карту и выбирают план поддержки;
     - администратор занимается вопросами поддержи учётных записями клиентов.

* **UC-2**: **Работа с обращениями**:
     - клиенты создают обращение через веб-интерфейс и по телефону;
     - специалисты callcenetr регистрируют обращения клиентов поступающих по телефону;
     - назначение эксперта по обращению происходит автоматически;
     - специалисты callcenetr выполняют первичную обработку обращения в случае, если не удалось назначить эксперта по обращению автоматически;
     - эксперты выполняют назначенные на них обращения;
     - клиенты оценивают качество выполненных работ по обращению;

* **UC-3**: **Работа с базой знаний**:
     - клиенты, специалисты callcenetr и эксперты осуществляют поиск по базе знаний;
     - эксперты обновляют базу знаний;

* **UC-4**: **Отчетность**:
     - менеджеры отслеживают уровень предоставленяи услуг клиентам по обращениям;
     - менеджеры формируют оперативные и аналитические отчеты по обращениям;

* **UC-5**: **Оплата и биллинг**:
     - счета клиентам выставляются автоматически ежемесячно;
     - клиенты просматривают историю своих счетов и списаний;
     - администратор управляет обработкой счетов для клиентов;

* **UC-6**: **Уведомления**:
     - клиенты получают email уведомления о жизненном цикле обращения;
     - эксперты получают email уведомления о назначении обращения;
     - специалисты callcenetr получают email уведомления о не назанченных автоматически обращениях на экспертов;
     - менеджеры получают email уведомления о нарушении уровня обслуживания по ообращению;

# Субдомены и процессы

Исходя из описания основных сценариев использования и функциональных требований  можем выделить следующие субдомены проблемной области и процессы:

* Управление обращениями
    - BP-1: Процесс регистрации обращения через web-интерфейс клиентом
    - BP-2: Процесс регистрации обращения клиента по телефону
    - BP-3: Процесс назначения эксперта по обращению
    - BP-4: Процесс выполнения работ по обращению экспертом
    - BP-5: Процесс оценки качества выполнненых работ по обращению клиентом
    - BP-6: Процесс формирования и отправки уведомлений по обращению
    - BP-7: Процесс формирования отчётности по обращениям менеджером
* Управление базой знаний
    - BP-8: Процесс поиска по БЗ
    - BP-9: Процесс наполнения и обновления информации в БЗ экспертом
* Управление клиентской базой
    - BP-10: Процесс регистрации учетных записей клиентов
    - BP-11: Процесс поддержки учётных записей клиентов
* Управление оплатой
    - BP-12: Процесс формирования счетов на оплату
    - BP-13: Процесс просмотра клиентом истории счетов и списаний

# Моделирование предметной области

## Идентифкация контекстов и их размеров

### Вариант 1

Исходя из описания основных сценариев использования и процессов можем декомпозировать предметную область на следующие ограниченные контексты:

- Контекст управления обращениями
- Контекст управления БЗ
- Контекст управления клиентской базой
- Контекст управления оплатой

В рамках данных контекстов формируем связи основных сущностей и процессов:

![Model components](../diagrams/model-componets.drawio.png)

**В данной модели мы получили 4 ограниченных контекста предметной области, слабо связанные друг с другом в части бизнес-логики, но при этом внутри контекстов бизнес-логика имеет сильные связи.**

### Вариант 2

Контекст управления обращениями получился большим и его имеет смысл декопмозировать на несколько отдельных ограниченных контекстов меньшего размера.
Исходя из описания основных сценариев использования и процессов в контексте управления обращениями можем выделить следующие ограниченные контексты:

- Работа с обращениями
- Назначение эксперта
- Уведомления
- Отчетность

В рамках данных контекстов формируем связи основных сущностей и процессов:

![Model components 2](../diagrams/model-componets-2.drawio.png)

**В данной модели мы видим, что контексты "Работа с обращениями", "Назначение эксперта", "Уведомления", "Отчетность" не имеют сильных связей друг с другом в части бизнес-логики. Это позволяет нам выделить их в отдельные строительные блоки(модули) системы.**

## Оценка модифицируемости

### Сценарии модифицируемости

* MS-1: Модификация или добавление функционала на карточке обращения:
     * Добавление полей объекта Обращение
     * Добавление возможности изменения клиентом параметров обращения в созданном обращении
     * Расширение статусной модели обращения

* MS-2: Модификация процесса назначения эксперта по обращению:
     * Изменение правил выбора эскперта по обращению
     * Добавление характеристик эксперта

* MS-3: Модификация процесса формирования и отправки уведомлений по обращению
     * Изменение правил отправки уведомлений
     * Изменение шаблонов уведомлений

* MS-4: Модификация функционала в контексте управления БЗ
     * Изменение полей объекта БЗ
     * Изменение механизма полнотекстового поиска по БЗ

* MS-5: Модификация функционала в контексте управления клиентской базой
     * Изменение процесса регистрации учетных записей клиентов

### Анализ и оценка модифицируемости

| Сценарий |Оценка по v1| Оценка по v2| Комментарий |
|----|----|----|----|
|MS-1|+-|+-|Модификации по данному сценарию могут повлиять на весь контекст управления обращениями. Вероятно, по модели v1 потребуется меньше согласованных изменений, но получаем повышенную сложность кодовой базы. Но, по модели v2 мы получаем больший контроль над небольшими блоками(модулями), вследствие этого - прозрачность и гибкость в сопровождении и внедрении изменений.|
|MS-2|--|++|Модификации по данному сценарию выгоднее выполнять при использовании модели v2, так как эти изменения возможно выполнять не затрагивая другие ограниченные контексты в рамках контекста управления обращениями|
|MS-3|--|++|Аналогично предыдущему сценарию, модификации по данному сценарию выгоднее выполнять при использовании модели v2, так как их возможно выполнять не затрагивая другие ограниченные контексты управления обращениями|
|MS-4|+-|+-|Модификации по данному сценарию могут затронуть весь  контекст управления БЗ, в обоих моделях. Но данные изменения делать довольно просто, так как данный контекст сравнительно небольшого размера и не имеет сильных связей в части бизнес-логики с другими контекстами|
|MS-5|+-|+-|Аналогично предыдущему сценарию, модификации по данному сценарию могут затронуть весь  контекст, но не окажут сильного влияния на другие контексты.|

## Вывод

Исходя из представленных вариантов декомпозиции предметной области и оценок модифицируемости данных моделей можно сделать следующий вывод:

**Декомпозиция предметной области на несколько, сравнительно небольших, ограниченных контекстов по модели v2 позволяет нам получить больший контроль, а вследствие этого - прозрачность и гибкость в сопровождении и внедрении изменений. Контексты "Работа с обращениями", "Назначение эксперта", "Уведомления", "Отчетность" не имеют сильных связей друг с другом в части бизнес-логики - это позволило нам выделить их в отдельные строительные блоки(модули) системы, часть из которых могут быть реализованы как микросервисы, а так же разрабатываться и сопровождаться разными командами специалистов.**